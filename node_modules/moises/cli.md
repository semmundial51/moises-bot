# Moises CLI

This package bundles an `SDK` and a `CLI` to allow basic usage of the [Moises Developer Platform](https://developer.moises.ai).

#### Quick start

Here's how you can easily process a folder containing audio files against the `moises/

```shell
export MOISES_DEVELOPER_APIKEY=your-api-key
moises process folder moises/stems-vocals-drums-bass-other ./audio ./stems
```

### Installation

```shell
npm i moises -g
```

### CLI Reference

#### Process local file

High-level method to process a single local file. Behind the scenes, this will: create a new job; wait for its completion; download the results to your local folder; and delete the job from the developer platform.

In addition to these steps, the result will also be saved in a file named `workflow.result.json`. This file will contain all the outputs in JSON format. If an output is a file, the relative path to the downloaded file will be written in the JSON. If the output is not a file, the actual value will be written instead.

```shell
moises process file <workflow> <fileLocation> <outputFolder>
```

##### Example

If the workflows has two outputs, vocals in WAVE format and bpm, two files will be created at the output folder: `vocals.wav` and `workflow.result.json`.

```json
// workflow.result.json
{
  "vocals": "./vocals.wav",
  "bpm": "64"
}
```

#### Process local folder

Similar to the previous method, but will process all files in the folder:

```shell
moises process folder <workflow> <inputFolder> <outputFolder> [--watch]
```

You can use the `--watch` option to continuously process new files added to the `inputFolder`.

#### Add job

```shell
moises job add <name> <workflow> <inputFile>
```

#### Delete job

```shell
moises job delete <jobId>
```

#### Job info

```shell
moises job info <jobId>
```

#### Job list

```shell
moises job list <jobId>
```
