import { mkdir } from 'node:fs/promises'
import { dirname } from 'node:path'

export function ensureFolderExists(filePath){
  const folder = dirname(filePath)
  return mkdir(folder, { recursive: true })
}

export function extractNameFromUrl(fileUrl) {
  const url = new URL(fileUrl)
  var filename = url.pathname.substring(url.pathname.lastIndexOf("/") + 1)
  return decodeURI(filename)
}

export function extractFileExtensionFromUrl(url) {
  const nameFromUrl = extractNameFromUrl(url)
  return nameFromUrl.substring(nameFromUrl.lastIndexOf(".") + 1)
}

export const sleep = (ms) => new Promise((resolve) => setTimeout(resolve, ms))
